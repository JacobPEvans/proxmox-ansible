---
# Group variables for Proxmox VE servers

# ZFS Swap Configuration
zfs_swap_size: "96G"
zfs_swap_pool: "rpool"
zfs_swap_dataset: "swap"

# Kernel Tuning - Sysctl
kernel_tuning_swappiness: 10
kernel_tuning_vfs_cache_pressure: 50
kernel_tuning_dirty_ratio: 10
kernel_tuning_dirty_background_ratio: 5
kernel_tuning_overcommit_memory: 0

# Kernel Tuning - Boot Parameters (AMD Zen1 stability)
# NOTE: kernel_tuning_boot_params_enabled is set to false by default to avoid conflict with
# crash_diagnostics role, which also manages boot parameters like nmi_watchdog, softlockup_panic,
# and hung_task_panic. Enable this only if you are NOT using crash_diagnostics for boot params.
kernel_tuning_boot_params_enabled: false
kernel_tuning_clocksource: hpet
kernel_tuning_tsc_mode: unstable
kernel_tuning_disable_smt: true

# Ulimits Configuration
ulimits_nofile: 65536
ulimits_nproc: 65536
ulimits_users:
  - "*"
  - root
  - splunk

# Common packages to install
common_packages:
  - htop
  - iotop
  - lm-sensors
  - rasdaemon
